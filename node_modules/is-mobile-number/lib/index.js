'use strict';

var googleLibPhoneNumber = require('google-libphonenumber');

var phoneUtil = googleLibPhoneNumber.PhoneNumberUtil.getInstance();
var phoneType = googleLibPhoneNumber.PhoneNumberType;

module.exports = function (phoneNumber, countryCode) {
  if (!countryCode) {
    throw new Error('`countryCode` not given.');
  }
  if (!phoneNumber) {
    return false;
  }
  try {
    var parsedPhoneNumber = phoneUtil.parse(phoneNumber, countryCode);
    return phoneUtil.getNumberType(parsedPhoneNumber) === phoneType.MOBILE;
  } catch (err) {
    return false;
  }
};